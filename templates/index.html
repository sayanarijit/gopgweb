<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>GoPGWeb</title>

    <link rel="stylesheet" href="/static/materialize/1.0.0-beta/css/materialize.min.css">
  </head>

  <body>

    <div class="container-fluid">
      <nav>
        <div class="nav-wrapper teal lighten-2">
          <a href="/" class="brand-logo">
            <span>&nbsp;</span> GoPGWeb
          </a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="https://github.com/sayanarijit/gopassgen">GitHub</a></li>
          </ul>
        </div>
      </nav>

      <p>&nbsp;</p>

      <div class="row">

        <div class="col s2">&nbsp;</div>

        <form class="col s8">

          <div class="row">
            <div class="input-field col s4">
              <input id="MaxLength" type="number" class="validate" value="16">
              <label for="MaxLength">Maximum password length</label>
            </div>
            <div class="input-field col s4">
              <input id="MinLength" type="number" class="validate" value="6">
              <label for="MinLength">Minimum password length</label>
            </div>
            <div class="input-field col s4">
              <input id="MinCapsAlpha" type="number" class="validate">
              <label for="MinCapsAlpha">Minimum capital letters</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s4">
              <input id="MinSmallAlpha" type="number" class="validate">
              <label for="MinSmallAlpha">Minimum small letters</label>
            </div>
            <div class="input-field col s4">
              <input id="MinDigits" type="number" class="validate">
              <label for="MinDigits">Minimum digits</label>
            </div>
            <div class="input-field col s4">
              <input id="MinSpclChars" type="number" class="validate">
              <label for="MinSpclChars">Minimum special characters</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s6">
              <input id="CapsAlphaPool" type="text" class="validate" value="ABCDEFGHIJKLMNOPQRSTUVWXYZ">
              <label for="CapsAlphaPool">Permitted capital letters</label>
            </div>
            <div class="input-field col s6">
              <input id="SmallAlphaPool" type="text" class="validate" value="abcdefghijklmnopqrstuvwxyz">
              <label for="SmallAlphaPool">Permitted capital letters</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s6">
              <input id="DigitPool" type="text" class="validate" value="0123456789">
              <label for="DigitPool">Permitted digits</label>
            </div>
            <div class="input-field col s6">
              <input id="SpclCharPool" type="text" class="validate" value="!@#$%^&*()-_=+,.?/:;{}[]~">
              <label for="SpclCharPool">Permitted special characters</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <h4><pre class="center" id="password">&nbsp;</pre></h4>
            </div>
          </div>

          <button class="btn btn-large waves-effect waves-light col s12" type="button" id="generate">Generate</button>
          
        </form>

        <div class="col s2">&nbsp;</div>
      </div>
    </div>

    <script src="/static/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script src="/static/jquery/3.3.1/jquery.min.js"></script>

    <script>
      $("#generate").on("click", ()=>{
        var data = {}

        $("#MaxLength").val() && (data.MaxLength = $("#MaxLength").val())
        $("#MinLength").val() && (data.MinLength = $("#MinLength").val())
        $("#MinCapsAlpha").val() && (data.MinCapsAlpha = $("#MinCapsAlpha").val())
        $("#MinSmallAlpha").val() && (data.MinSmallAlpha = $("#MinSmallAlpha").val())
        $("#MinDigits").val() && (data.MinDigits = $("#MinDigits").val())
        $("#MinSpclChars").val() && (data.MinSpclChars = $("#MinSpclChars").val())
        $("#CapsAlphaPool").val() && (data.CapsAlphaPool = $("#CapsAlphaPool").val())
        $("#SmallAlphaPool").val() && (data.SmallAlphaPool = $("#SmallAlphaPool").val())
        $("#DigitPool").val() && (data.DigitPool = $("#DigitPool").val())
        $("#SpclCharPool").val() && (data.SpclCharPool = $("#SpclCharPool").val())

        console.log(data);
        
        
        $.post("/api/generate", data).done(resp => {
          $("#password").text(resp.result)
        })
      })
    </script>

  </body>
</html>